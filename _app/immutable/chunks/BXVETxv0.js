const w=["de"],b="PARAGLIDE_LOCALE";const y=["cookie","globalVariable","baseLocale"];globalThis.__paraglide={};let s,h=!1,u=()=>{let e;for(const o of y){if(o==="cookie")e=z();else if(o==="baseLocale")e="de";else if(o==="globalVariable"&&s!==void 0)e=s;else if(U(o)&&f.has(o)){const t=f.get(o);if(t){const a=t.getLocale();if(a instanceof Promise)continue;e=a}}if(e!==void 0){const t=x(e);return h||(s=t,h=!0,R(t,{reload:!1})),t}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};const g=e=>{window.location.reload()};let R=(e,o)=>{const t={reload:!0,...o};let a;try{a=u()}catch{}const l=[];for(const n of y)if(n==="globalVariable")s=e;else if(n==="cookie"){if(typeof document>"u"||typeof window>"u")continue;const r=`${b}=${e}; path=/; max-age=34560000`;document.cookie=r}else{if(n==="baseLocale")continue;if(U(n)&&f.has(n)){const r=f.get(n);if(r){let i=r.setLocale(e);i instanceof Promise&&(i=i.catch(k=>{throw new Error(`Custom strategy "${n}" setLocale failed.`,{cause:k})}),l.push(i))}}}if(t.reload&&window.location&&e!==a){if(l.length)return Promise.all(l).then(()=>{g()});g()}else if(l.length)return Promise.all(l)},d=()=>typeof window<"u"?window.location.origin:"http://fallback.com";function c(e){return e?w.includes(e):!1}function x(e){if(c(e)===!1)throw new Error(`Invalid locale: ${e}. Expected one of: ${w.join(", ")}`);return e}function z(){if(typeof document>"u"||!document.cookie)return;const o=document.cookie.match(new RegExp(`(^| )${b}=([^;]+)`))?.[2];if(c(o))return o}let m,L;function P(e){const o=typeof e=="string"?e:e.href;if(m===o)return L;let t;return t=S(e),m=o,L=t,t}function S(e){const t=new URL(e,"http://dummy.com").pathname.split("/").filter(Boolean);if(t.length>0){const a=t[0];if(c(a))return a}return"de"}function p(e,o){return j(e,o)}function j(e,o){const t=typeof e=="string"?new URL(e,d()):new URL(e),a=o?.locale??u();if(P(t)===a)return t;const n=t.pathname.split("/").filter(Boolean);return n.length>0&&c(n[0])&&n.shift(),a==="de"?t.pathname="/"+n.join("/"):t.pathname="/"+a+"/"+n.join("/"),t}function $(e){return E(e)}function E(e){const o=typeof e=="string"?new URL(e,d()):new URL(e),t=o.pathname.split("/").filter(Boolean);return t.length>0&&c(t[0])&&(o.pathname="/"+t.slice(1).join("/")),o}function C(e,o){const t=u(),a=o?.locale??t,l=new URL(e,d()),n=p(l,{locale:a});return e.startsWith("/")&&l.origin===n.origin?a!==t&&p(l,{locale:t}).origin!==n.origin?n.href:n.pathname+n.search+n.hash:n.href}const f=new Map;function U(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}export{w as a,$ as d,u as g,C as l};
